(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{29:function(n,t,e){},36:function(n,t,e){"use strict";e.r(t);var c=e(0),r=e(1),i=e(20),a=e.n(i),o=(e(29),e(4)),u=e(2),s=e(3),j=e(9),b=e(5),d="token",f=function(n){localStorage.setItem(d,n)},l=function(){return localStorage.getItem(d)},x="https://student-json-api.lidemy.me",O=function(){var n=l();return fetch("".concat(x,"/me"),{headers:{authorization:"".concat(n)}}).then((function(n){return n.json()}))},h=Object(r.createContext)(null);function p(){var n=Object(u.a)(["\n  color: red;\n"]);return p=function(){return n},n}function v(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  text-align: center;\n"]);return v=function(){return n},n}function g(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0px auto;\n"]);return g=function(){return n},n}var m=s.a.div(g()),w=s.a.div(v()),y=s.a.div(p());function S(){var n=Object(r.useContext)(h).setUser,t=Object(b.f)(),e=Object(r.useState)(""),i=Object(o.a)(e,2),a=i[0],u=i[1],s=Object(r.useState)(""),j=Object(o.a)(s,2),d=j[0],l=j[1],p=Object(r.useState)(),v=Object(o.a)(p,2),g=v[0],S=v[1];return Object(c.jsx)(m,{children:Object(c.jsxs)(w,{children:[Object(c.jsxs)("form",{onSubmit:function(e){S(null),function(n,t){return fetch("".concat(x,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(a,d).then((function(e){if(0===e.ok)return S(e.message);f(e.token),O().then((function(e){if(1!==e.ok)return f(null),S(e.toString());n(e.data),t.push("/")}))}))},children:[Object(c.jsxs)("div",{children:["username:"," ",Object(c.jsx)("input",{value:a,onChange:function(n){u(n.target.value)}})]}),Object(c.jsxs)("div",{children:["password:"," ",Object(c.jsx)("input",{type:"password",value:d,onChange:function(n){l(n.target.value)}})]}),Object(c.jsx)("button",{children:"\u767b\u5165"})]}),g&&Object(c.jsx)(y,{children:g})]})})}function k(){var n=Object(u.a)(["\n  color: black;\n  border: 1px solid black;\n  border-radius: 20%;\n  padding: 10px;\n  text-decoration: none;\n  & + & {\n    margin-left: 5px;\n  }\n  ","\n"]);return k=function(){return n},n}function C(){var n=Object(u.a)(["\n  margin: 10px 0px;\n  display: flex;\n  justify-content: center;\n"]);return C=function(){return n},n}function z(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return z=function(){return n},n}function F(){var n=Object(u.a)(["\n  font-size: 24px;\n  text-decoration: none;\n  color: black;\n"]);return F=function(){return n},n}function $(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]);return $=function(){return n},n}function _(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0 10%;\n  border: 3px solid black;\n  margin-top: 40px;\n"]);return _=function(){return n},n}var T=s.a.div(_()),P=s.a.div($()),J=Object(s.a)(j.b)(F()),L=s.a.div(z()),U=s.a.div(C()),A=Object(s.a)(j.b)(k(),(function(n){return n.$active&&"\n  background: #F0FFFF;\n  color: black;\n  "}));function I(n){var t=n.post;return Object(c.jsxs)(P,{children:[Object(c.jsx)(J,{to:"/post/".concat(t.id),children:t.title}),Object(c.jsx)(L,{children:new Date(t.createdAt).toLocaleString()})]})}function D(){var n=Object(b.g)().pathname,t=Object(b.h)().page;t||(t=1);var e=Object(r.useState)([]),i=Object(o.a)(e,2),a=i[0],u=i[1],s=Object(r.useRef)();return Object(r.useEffect)((function(){fetch("".concat(x,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()})).then((function(n){var e=n.length;s.current=Math.ceil(e/5),function(n,t){return fetch("".concat(x,"/posts?_expand=user&_sort=createdAt&_order=desc&_page=").concat(n,"&_limit=").concat(t)).then((function(n){return n.json()}))}(t,5).then((function(n){console.log(n),u(n)}))}))}),[t]),Object(c.jsxs)(T,{children:[a.map((function(n){return Object(c.jsx)(I,{post:n},n.id)})),Object(c.jsx)(U,{children:new Array(s.current).fill("").map((function(t,e){return Object(c.jsx)(A,{to:"/posts/".concat(e+1),$active:n==="/posts/".concat(e+1)||"/"===n&&0===e,children:e+1},e)}))})]})}function E(){var n=Object(u.a)(["\n  font-size: 30px;\n"]);return E=function(){return n},n}function N(){var n=Object(u.a)(["\n  color: red;\n"]);return N=function(){return n},n}function B(){var n=Object(u.a)(["\n  width: 600px;\n  height: 120px;\n  border: 3px solid #cccccc;\n  padding: 5px;\n  font-family: Tahoma, sans-serif;\n  background-position: bottom right;\n  background-repeat: no-repeat;\n"]);return B=function(){return n},n}function R(){var n=Object(u.a)(["\n  width: 600px;\n  border: 3px solid #cccccc;\n  padding: 5px;\n"]);return R=function(){return n},n}function M(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  text-align: center;\n"]);return M=function(){return n},n}function q(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0px auto;\n"]);return q=function(){return n},n}var G=s.a.div(q()),H=s.a.div(M()),K=s.a.textarea(R()),Q=s.a.textarea(B()),V=s.a.div(N()),W=s.a.div(E());function X(){var n=Object(b.f)(),t=(Object(r.useContext)(h).setUser,Object(r.useState)("")),e=Object(o.a)(t,2),i=e[0],a=e[1],u=Object(r.useState)(""),s=Object(o.a)(u,2),j=s[0],d=s[1],f=Object(r.useState)(),O=Object(o.a)(f,2),p=O[0];O[1];return Object(c.jsx)(G,{children:Object(c.jsxs)(H,{children:[Object(c.jsxs)("form",{onSubmit:function(t){!function(n,t){var e=l();fetch("".concat(x,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(i,j),n.push("/")},children:[Object(c.jsxs)(W,{children:[Object(c.jsx)("div",{children:"\u6a19\u984c:"}),Object(c.jsx)(K,{value:i,onChange:function(n){a(n.target.value)}})]}),Object(c.jsxs)(W,{children:[Object(c.jsx)("div",{children:"\u5167\u5bb9: "}),Object(c.jsx)(Q,{value:j,onChange:function(n){d(n.target.value)}})]}),Object(c.jsx)("button",{children:"\u767c\u6587"})]}),p&&Object(c.jsx)(V,{children:p})]})})}function Y(){var n=Object(u.a)(["\n  border: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 50px;\n  text-align: center;\n  margin-top: 50px;\n  font-size: 40px;\n"]);return Y=function(){return n},n}function Z(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0 10%;\n"]);return Z=function(){return n},n}var nn=s.a.div(Z()),tn=s.a.div(Y());function en(){return Object(c.jsx)(nn,{children:Object(c.jsx)(tn,{children:"\u9019\u662f\u4e00\u500b\u7df4\u7fd2 React \u7684\u90e8\u843d\u683c\uff0c\u8a3b\u518a\u5e33\u865f\u6642\u5207\u52ff\u4f7f\u7528\u771f\u5be6\u5bc6\u78bc\uff0c\u88e1\u9762\u6709\u8a31\u591a\u529f\u80fd\u4e26\u4e0d\u5b8c\u5584\uff0c\u5e0c\u671b\u7d93\u904e\u8a13\u7df4\u80fd\u5920\u8d8a\u4f86\u8d8a\u719f\u6089 React \u9019\u5957\u5de5\u5177\u3002"})})}function cn(){var n=Object(u.a)(["\n  font-size: 30px;\n"]);return cn=function(){return n},n}function rn(){var n=Object(u.a)(["\n  color: red;\n"]);return rn=function(){return n},n}function an(){var n=Object(u.a)(["\n  width: 600px;\n  height: 120px;\n  border: 3px solid #cccccc;\n  padding: 5px;\n  font-family: Tahoma, sans-serif;\n  background-position: bottom right;\n  background-repeat: no-repeat;\n"]);return an=function(){return n},n}function on(){var n=Object(u.a)(["\n  width: 600px;\n  border: 3px solid #cccccc;\n  padding: 5px;\n"]);return on=function(){return n},n}function un(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  text-align: center;\n"]);return un=function(){return n},n}function sn(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0px auto;\n"]);return sn=function(){return n},n}var jn=s.a.div(sn()),bn=s.a.div(un()),dn=s.a.textarea(on()),fn=s.a.textarea(an()),ln=s.a.div(rn()),xn=s.a.div(cn());function On(){var n=Object(b.f)(),t=(Object(r.useContext)(h).setUser,Object(r.useState)("")),e=Object(o.a)(t,2),i=e[0],a=e[1],u=Object(r.useState)(""),s=Object(o.a)(u,2),j=s[0],d=s[1],f=Object(r.useState)(),O=Object(o.a)(f,2),p=O[0];O[1];return Object(c.jsx)(jn,{children:Object(c.jsxs)(bn,{children:[Object(c.jsxs)("form",{onSubmit:function(t){!function(n,t){var e=l();fetch("".concat(x,"/posts"),{method:"PUT",headers:{"content-type":"application/json",authorization:"".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(i,j),n.push("/")},children:[Object(c.jsxs)(xn,{children:[Object(c.jsx)("div",{children:"\u6a19\u984c:"}),Object(c.jsx)(dn,{value:i,onChange:function(n){a(n.target.value)}})]}),Object(c.jsxs)(xn,{children:[Object(c.jsx)("div",{children:"\u5167\u5bb9: "}),Object(c.jsx)(fn,{value:j,onChange:function(n){d(n.target.value)}})]}),Object(c.jsx)("button",{children:"\u767c\u6587"})]}),p&&Object(c.jsx)(ln,{children:p})]})})}function hn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  "," {\n    margin-left: 64px;\n  }\n"]);return hn=function(){return n},n}function pn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing; border-box;\n  weight: 100px;\n  cursor: pointer;\n  margin-right: 15px;\n  height: 65px;\n  width: 105px;\n  color: white;\n  text-decoration: none;\n  ","\n"]);return pn=function(){return n},n}function vn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return vn=function(){return n},n}function gn(){var n=Object(u.a)(["\n  font-size: 32px;\n  font-weight: bold;\n"]);return gn=function(){return n},n}function mn(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: flexed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0px 32px;\n  box-sizing; border-box;\n  background: rgba(0,0,0,0.8);\n  color: white;\n"]);return mn=function(){return n},n}var wn=s.a.div(mn()),yn=s.a.div(gn()),Sn=s.a.div(vn()),kn=Object(s.a)(j.b)(pn(),(function(n){return n.$active&&"\n  background: rgba(0, 0, 0, 0.1)\n  "})),Cn=s.a.div(hn(),Sn);function zn(){var n=Object(b.g)(),t=Object(r.useContext)(h),e=t.user,i=t.setUser,a=Object(r.useContext)(h),o=(a.isLoding,a.setIsLoding,Object(b.f)());return Object(c.jsxs)(wn,{children:[Object(c.jsxs)(Cn,{children:[Object(c.jsx)(yn,{children:"\u6211\u7684 Blog"}),Object(c.jsxs)(Sn,{children:[Object(c.jsx)(kn,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),Object(c.jsx)(kn,{to:"/about",$active:"about"===n.pathname,children:"\u95dc\u65bc"}),e&&Object(c.jsx)(kn,{to:"/new-post",$active:"new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(c.jsxs)(Sn,{children:[!e&&Object(c.jsx)(kn,{to:"/register",$active:"register"===n.pathname,children:"\u8a3b\u518a"}),!e&&Object(c.jsx)(kn,{to:"/login",$active:"login"===n.pathname,children:"\u767b\u5165"}),e&&Object(c.jsx)(kn,{onClick:function(){f(""),i(null),"/"!==n.pathname&&o.push("/")},children:"\u767b\u51fa"})]})]})}function Fn(){var n=Object(u.a)(["\n  margin-right: 10px;\n  width: 50px;\n  height: 30px;\n  font-size: 17px;\n"]);return Fn=function(){return n},n}function $n(){var n=Object(u.a)(["\n  width: 50px;\n  height: 30px;\n  font-size: 17px;\n"]);return $n=function(){return n},n}function _n(){var n=Object(u.a)([""]);return _n=function(){return n},n}function Tn(){var n=Object(u.a)(["\n  font-size: 20px;\n  white-space: pre-wrap;\n"]);return Tn=function(){return n},n}function Pn(){var n=Object(u.a)(["\n  color: grey;\n  font-weight: bold;\n}"]);return Pn=function(){return n},n}function Jn(){var n=Object(u.a)([""]);return Jn=function(){return n},n}function Ln(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n"]);return Ln=function(){return n},n}function Un(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0px auto;\n"]);return Un=function(){return n},n}var An=s.a.div(Un()),In=s.a.div(Ln()),Dn=s.a.h1(Jn()),En=s.a.div(Pn()),Nn=s.a.p(Tn()),Bn=s.a.div(_n()),Rn=s.a.button($n()),Mn=s.a.button(Fn());function qn(n){var t=n.post,e=n.id,r=Object(b.g)(),i=Object(b.f)();return Object(c.jsx)(An,{children:Object(c.jsxs)(In,{children:[Object(c.jsx)(Mn,{to:"/eddit",$active:"eddit"===r.pathname,children:"\u7de8\u8f2f"}),Object(c.jsx)(Rn,{onClick:function(n){!function(n){var t=l();fetch("".concat(x,"/posts/").concat(n,"?_expand=user"),{method:"Delete",headers:{"content-type":"application/json",authorization:"".concat(t)}}).then((function(n){return n.json()}))}(e),i.push("/")},children:"\u522a\u9664"}),Object(c.jsx)(Dn,{children:t.title}),Object(c.jsx)(En,{children:new Date(t.createdAt).toLocaleString()}),Object(c.jsx)(Nn,{children:t.body})]})})}function Gn(){var n=Object(r.useState)([]),t=Object(o.a)(n,2),e=t[0],i=t[1],a=Object(b.h)().id;return Object(r.useEffect)((function(){(function(n){return fetch("".concat(x,"/posts/").concat(n,"?_expand=user")).then((function(n){return n.json()}))})(a).then((function(n){return i(n)}))}),[a]),Object(c.jsx)(Bn,{children:Object(c.jsx)(qn,{post:e,id:a})})}function Hn(){var n=Object(u.a)(["\n  color: red;\n"]);return Hn=function(){return n},n}function Kn(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  text-align: center;\n"]);return Kn=function(){return n},n}function Qn(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0px auto;\n"]);return Qn=function(){return n},n}var Vn=s.a.div(Qn()),Wn=s.a.div(Kn()),Xn=s.a.div(Hn());function Yn(){var n=Object(r.useState)(""),t=Object(o.a)(n,2),e=t[0],i=t[1],a=Object(r.useState)(""),u=Object(o.a)(a,2),s=u[0],j=u[1],d=Object(r.useState)(""),f=Object(o.a)(d,2),l=f[0],O=f[1],h=Object(b.f)(),p=Object(r.useState)(),v=Object(o.a)(p,2),g=v[0];v[1];return Object(c.jsx)(Vn,{children:Object(c.jsxs)(Wn,{children:[Object(c.jsxs)("form",{onSubmit:function(n){!function(n,t,e){fetch("".concat(x,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(e,s,l),h.push("/")},children:[Object(c.jsxs)("div",{children:["nickname:"," ",Object(c.jsx)("input",{value:e,onChange:function(n){i(n.target.value)}})]}),Object(c.jsxs)("div",{children:["username:"," ",Object(c.jsx)("input",{value:s,onChange:function(n){j(n.target.value)}})]}),Object(c.jsxs)("div",{children:["password:"," ",Object(c.jsx)("input",{type:"password",value:l,onChange:function(n){O(n.target.value)}})]}),Object(c.jsx)("button",{children:"\u8f38\u5165"})]}),g&&Object(c.jsx)(Xn,{children:g})]})})}function Zn(){var n=Object(u.a)([""]);return Zn=function(){return n},n}var nt=s.a.div(Zn());var tt=function(){var n=Object(r.useState)(!0),t=Object(o.a)(n,2),e=t[0],i=t[1];console.log(e);var a=Object(r.useState)(null),u=Object(o.a)(a,2),s=u[0],d=u[1];return Object(r.useEffect)((function(){O().then((function(n){n.ok&&(d(n.data),i(!1))}))}),[]),Object(c.jsx)(h.Provider,{value:{user:s,setUser:d},children:Object(c.jsx)(nt,{children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(zn,{}),Object(c.jsxs)(b.c,{children:[Object(c.jsx)(b.a,{exact:!0,path:"/",children:Object(c.jsx)(D,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/posts/:page",children:Object(c.jsx)(D,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/about",children:Object(c.jsx)(en,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/login",children:Object(c.jsx)(S,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/register",children:Object(c.jsx)(Yn,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/new-post",children:Object(c.jsx)(X,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/eddit",children:Object(c.jsx)(On,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/post/:id",children:Object(c.jsx)(Gn,{})})]})]})})})},et=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,37)).then((function(t){var e=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;e(n),c(n),r(n),i(n),a(n)}))};a.a.render(Object(c.jsx)(tt,{}),document.getElementById("root")),et()}},[[36,1,2]]]);
//# sourceMappingURL=main.50c713aa.chunk.js.map